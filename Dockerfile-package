ARG BASE_CONTAINER=java:latest
FROM ${BASE_CONTAINER}

ARG REFRESHED_AT=2019-01-22

ARG GIT_REPOSITORY_NAME=unknown

RUN apt-get update
RUN apt-get -y install \
      make \
      maven \
 && rm -rf /var/lib/apt/lists/*
 
# Copy the repository from the local host.

COPY . /${GIT_REPOSITORY_NAME}

# Copy ...

ARG SENZING_G2_JAR_PATHNAME=/opt/senzing/g2/lib/g2.jar

RUN mkdir --parents $(dirname ${SENZING_G2_JAR_PATHNAME}) \
 && cp /${GIT_REPOSITORY_NAME}/target/g2.jar ${SENZING_G2_JAR_PATHNAME} 

# Run the "make" command to create the artifacts.

WORKDIR /${GIT_REPOSITORY_NAME}
RUN make package

# At runtime, run the following:

CMD /bin/bash
